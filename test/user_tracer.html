<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wikimedia Recent Changes - U:Suyash Dwivedi</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
        header, footer { padding: 10px; background-color: #f4f4f4; text-align: center; }
        .edit-item { margin-bottom: 10px; padding: 10px; border-bottom: 1px solid #ccc; }
        .date-time { text-align: center; font-size: 18px; font-weight: bold; margin: 10px 0; color: green; }
        #counter { font-weight: bold; }
        .nav-buttons { position: fixed; bottom: 20px; right: 20px; z-index: 10; }
        .nav-button { margin: 5px; padding: 10px; background-color: #4CAF50; color: white; border: none; cursor: pointer; border-radius: 5px; }
        .nav-button:hover { background-color: #45a049; }
        header img { position: absolute; top: 10px; left: 10px; width: 90px; height: auto; }
        .zoom-buttons { position: fixed; top: 10px; right: 10px; display: flex; z-index: 10; }
        .zoom-button { background-color: orange; color: white; padding: 5px; border: none; cursor: pointer; border-radius: 50%; font-size: 20px; font-weight: bold; margin: 5px; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; }
        .zoom-button:hover { background-color: #ff7f00; }
    </style>
</head>
<body>
    <header>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Wikipedia-logo-v2.svg/263px-Wikipedia-logo-v2.svg.png" alt="Wikipedia Logo">
        <h1>Wikimedia Recent Changes</h1>
        <p>Created by <a href="https://meta.wikimedia.org/wiki/User:Suyash.dwivedi" target="_blank">Suyash Dwivedi</a></p>

        <label for="userSelect">Select User Contributions:</label>
        <select id="userSelect">
            <option value="अजीत कुमार तिवारी">अजीत कुमार तिवारी (Ajit Kumar Tiwari)</option>
            <option value="SM7" selected>SM7</option>
            <option value="हिंदुस्थान वासी">हिंदुस्थान वासी (Hindustan Vasi)</option>
            <option value="संजीव कुमार">संजीव कुमार (Sanjeev Kumar)</option>
            <option value="अनिरुद्ध कुमार">अनिरुद्ध कुमार (Anirudh Kumar)</option>
            <option value="राजकुमार">राजकुमार</option> 
            <option value="Utkarsh555">Utkarsh555</option>
            <option value="Dev_Jadiya">Dev_Jadiya</option>
        </select>

        <br><br>
    </header>

    <div id="guc-data"></div>

    <script>
        const userSelect = document.getElementById('userSelect');

        async function fetchGUCData(username) {
            try {
                const url = `https://guc.toolforge.org/?by=date&user=${encodeURIComponent(username)}`;
                const response = await fetch(url);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                const edits = doc.querySelectorAll('table tbody tr');

                const data = [];
                edits.forEach((edit) => {
                    const columns = edit.querySelectorAll('td');
                    if (columns.length > 0) {
                        const wiki = columns[0].textContent.trim();
                        const page = columns[1].textContent.trim();
                        const editSummary = columns[2].textContent.trim();
                        const date = columns[3].textContent.trim();
                        data.push({ wiki, page, editSummary, date });
                    }
                });

                displayGUCData(data);
            } catch (error) {
                console.error("Error fetching GUC data:", error);
                alert("Failed to fetch GUC data. Please try again later.");
            }
        }

        function displayGUCData(data) {
            const gucDataDiv = document.getElementById('guc-data');
            gucDataDiv.innerHTML = '';
            data.forEach((edit) => {
                const editItem = document.createElement('div');
                editItem.className = 'edit-item';
                editItem.innerHTML = `
                    <strong>Wiki:</strong> ${edit.wiki}<br>
                    <strong>Page:</strong> ${edit.page}<br>
                    <strong>Edit Summary:</strong> ${edit.editSummary}<br>
                    <strong>Date:</strong> ${edit.date}<br>
                    <hr>
                `;
                gucDataDiv.appendChild(editItem);
            });
        }

        userSelect.addEventListener('change', () => fetchGUCData(userSelect.value));

        window.onload = function() {
            fetchGUCData(userSelect.value);
        };
    </script>
</body>
</html>